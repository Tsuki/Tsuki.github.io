{"title":"處理圖像的TypedArray和一般的UInt8Array區別","slug":"處理圖像的TypedArray和一般的UInt8Array區別","date":"2019-06-26T21:05:49.000Z","updated":"2019-06-26T14:13:07.012Z","comments":true,"path":"api/articles/2019/06/26/處理圖像的TypedArray和一般的UInt8Array區別.json","photos":[],"link":"","excerpt":"在 ES2015上加入了 TypedArray 的處理，以處理 buffer 帶來的問題，而其中 Uint8 有兩種類型和處理方法，分別是Uint8Array，Uint8ClampedArray。前者是無條件捨去小數（ToUint8），後者是使用奇進偶捨（ToUint8Clamp ）的進位方法。其次前者不會對二補位的負數作溢出處理，後者會對小於０和大於２５５的數字作出歸０或２５５。1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>Int8Array();<br>Uint8Array();<br>Uint8ClampedArray();<br>Int16Array();<br>Uint16Array();<br>Int32Array();<br>Uint32Array();<br>Float32Array();<br>Float64Array();<br>BigInt64Array();<br>BigUint64Array();<br>別外在ImageData()的 array 是注明 Uint8ClampedArray 。ToUint8 ( argument )The abstract operation ToUint8 converts argument to one of 28 integer values in the range 0 through 255, inclusive. This abstract operation functions as follows:Let number be ToNumber(argument).ReturnIfAbrupt(number).If number is NaN, +0, −0, +∞, or −∞, return +0.Let int be the mathematical value that is the same sign as number and whose magnitude is floor(abs(number)).Let int8bit be int modulo 28.Return int8bit.ToUint8Clamp ( argument )The abstract operation ToUint8Clamp converts argument to one of 28 integer values in the range 0 through 255, inclusive. This abstract operation functions as follows:","content":"<p>在 ES2015上加入了 TypedArray 的處理，以處理 buffer 帶來的問題，而其中 Uint8 有兩種類型和處理方法，分別是Uint8Array，Uint8ClampedArray。</p><p>前者是無條件捨去小數（ToUint8），後者是使用奇進偶捨（ToUint8Clamp ）的進位方法。</p><p>其次前者不會對二補位的負數作溢出處理，後者會對小於０和大於２５５的數字作出歸０或２５５。</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Int8Array();</span><br><span class=\"line\">Uint8Array();</span><br><span class=\"line\">Uint8ClampedArray();</span><br><span class=\"line\">Int16Array();</span><br><span class=\"line\">Uint16Array();</span><br><span class=\"line\">Int32Array();</span><br><span class=\"line\">Uint32Array();</span><br><span class=\"line\">Float32Array();</span><br><span class=\"line\">Float64Array();</span><br><span class=\"line\">BigInt64Array();</span><br><span class=\"line\">BigUint64Array();</span><br></pre></td></tr></table></figure><p>別外在<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ImageData/ImageData\" target=\"_blank\" rel=\"noopener\"><code>ImageData()</code></a>的 <code>array</code> 是注明 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray\" target=\"_blank\" rel=\"noopener\"><code>Uint8ClampedArray</code></a> 。</p><h3 id=\"ToUint8-argument\"><a href=\"#ToUint8-argument\" class=\"headerlink\" title=\"ToUint8 ( argument )\"></a>ToUint8 ( argument )</h3><p>The abstract operation ToUint8 converts argument to one of 28 integer values in the range 0 through 255, inclusive. This abstract operation functions as follows:</p><ol><li>Let <em>number</em> be <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-tonumber\" target=\"_blank\" rel=\"noopener\">ToNumber</a>(<em>argument</em>).</li><li><a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-returnifabrupt\" target=\"_blank\" rel=\"noopener\">ReturnIfAbrupt</a>(<em>number</em>).</li><li>If <em>number</em> is <strong>NaN</strong>, <strong>+0</strong>, <strong>−0</strong>, <strong>+∞</strong>, or <strong>−∞</strong>, return <strong>+0</strong>.</li><li>Let <em>int</em> be the mathematical value that is the same sign as <em>number</em> and whose magnitude is <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-algorithm-conventions\" target=\"_blank\" rel=\"noopener\">floor</a>(<a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-algorithm-conventions\" target=\"_blank\" rel=\"noopener\">abs</a>(<em>number</em>)).</li><li>Let <em>int8bit</em> be <em>int</em> <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-algorithm-conventions\" target=\"_blank\" rel=\"noopener\">modulo</a> 28.</li><li>Return <em>int8bit</em>.</li></ol><h3 id=\"ToUint8Clamp-argument\"><a href=\"#ToUint8Clamp-argument\" class=\"headerlink\" title=\"ToUint8Clamp ( argument )\"></a>ToUint8Clamp ( argument )</h3><p>The abstract operation ToUint8Clamp converts argument to one of 28 integer values in the range 0 through 255, inclusive. This abstract operation functions as follows:</p><ol><li>Let <em>number</em> be <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-tonumber\" target=\"_blank\" rel=\"noopener\">ToNumber</a>(<em>argument</em>).</li><li><a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-returnifabrupt\" target=\"_blank\" rel=\"noopener\">ReturnIfAbrupt</a>(<em>number</em>).</li><li>If <em>number</em> is <strong>NaN</strong>, return <strong>+0</strong>.</li><li>If <em>number</em> ≤ 0, return <strong>+0</strong>.</li><li>If <em>number</em> ≥ 255, return 255.</li><li>Let <em>f</em> be <a href=\"http://www.ecma-international.org/ecma-262/6.0/index.html#sec-algorithm-conventions\" target=\"_blank\" rel=\"noopener\">floor</a>(<em>number</em>).</li><li>If <em>f +</em> 0.5 &lt; <em>number</em>, return <em>f</em> + 1.</li><li>If <em>number</em> &lt; <em>f +</em> 0.5, return <em>f</em>.</li><li>If <em>f</em> is odd, return <em>f</em> + 1.</li><li>Return <em>f</em>.</li></ol>","prev":null,"next":{"title":"Tensorflow尋找Tensor節點","link":"/2019/06/26/Tensorflow尋找Tensor節點"},"categories":[{"name":"JavaScript","slug":"JavaScript","count":1,"path":"api/categories/JavaScript.json"}],"tags":[]}