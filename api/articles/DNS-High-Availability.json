{"title":"DNS故障轉移測試","slug":"DNS-High-Availability","date":"2018-08-08T18:34:05.000Z","updated":"2018-08-08T12:10:20.356Z","comments":true,"path":"api/articles/DNS-High-Availability.json","photos":["https://as.bitinn.net/upload/cjkewl4ic018e8i5nkqukol2w.1200.jpg"],"link":"","excerpt":null,"covers":null,"content":"<p>建立 lookback 地址</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\" data-line-number=\"1\"></span><br><span class=\"line\" data-line-number=\"2\"></span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ifconfig lo0 <span class=\"built_in\">alias</span> 127.0.0.2 up</span><br><span class=\"line\">sudo ifconfig lo0 <span class=\"built_in\">alias</span> 127.0.0.3 up</span><br></pre></td></tr></table></figure>\n<p>在 hosts 加入本地 dns 記錄</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\" data-line-number=\"1\"></span><br><span class=\"line\" data-line-number=\"2\"></span><br><span class=\"line\" data-line-number=\"3\"></span><br><span class=\"line\" data-line-number=\"4\"></span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/hosts</span><br><span class=\"line\">127.0.0.1 localhost</span><br><span class=\"line\">127.0.0.2 localhost</span><br><span class=\"line\">127.0.0.3 localhost</span><br></pre></td></tr></table></figure>\n<p>在不同終端使用 netcat 建立本地監聽 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\" data-line-number=\"1\"></span><br><span class=\"line\" data-line-number=\"2\"></span><br><span class=\"line\" data-line-number=\"3\"></span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nc -lk 127.0.0.1 8080</span><br><span class=\"line\">nc -lk 127.0.0.2 8080</span><br><span class=\"line\">nc -lk 127.0.0.3 8080</span><br></pre></td></tr></table></figure>\n<p>測試傳送信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\" data-line-number=\"1\"></span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nc localhost 8080</span><br></pre></td></tr></table></figure>\n<p>嘗試關閉不同終端 以測試能不能故障轉移</p>\n","categories":[{"name":"Ops","slug":"Ops","count":6,"path":"api/categories/Ops.json"}],"tags":[]}